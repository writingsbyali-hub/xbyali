---
export interface FilterOption {
  label: string;
  value: string;
}

export interface Props {
  collectionOptions: FilterOption[];
  statusOptions: FilterOption[];
  categoryOptions: FilterOption[];
  tagOptions: FilterOption[];
  totalCount: number;
}

const { collectionOptions, statusOptions, categoryOptions, tagOptions, totalCount } = Astro.props;
---

<aside class="filter-panel sticky top-28 flex flex-col gap-6 rounded-3xl border border-neutral-200 bg-white p-6 shadow-[0_35px_60px_-40px_rgba(15,23,42,0.35)] dark:border-neutral-800 dark:bg-neutral-900 dark:shadow-none">
  <div class="space-y-1">
    <p class="text-xs font-semibold uppercase tracking-[0.35em] text-neutral-500 dark:text-neutral-400">Search</p>
    <div class="relative">
      <input
        id="library-search"
        type="search"
        placeholder="Trace a theme, tool, or phrase..."
        class="w-full rounded-2xl border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-900 transition focus:border-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100 dark:focus:border-white dark:focus:ring-white"
      />
      <span class="pointer-events-none absolute inset-y-0 right-4 flex items-center text-neutral-400">
        <svg class="h-4 w-4" viewBox="0 0 16 16" fill="none" aria-hidden="true">
          <path d="M7.25 12.5a5.25 5.25 0 1 1 3.31-9.39l.2.18a5.25 5.25 0 0 1-3.51 9.21Zm0-9a3.75 3.75 0 1 0 2.44 6.6l.14-.12.12-.14a3.74 3.74 0 0 0-2.7-6.34Zm5.03 11.03-3.27-3.27 1.06-1.06 3.27 3.27-1.06 1.06Z" fill="currentColor" />
        </svg>
      </span>
    </div>
    <p class="text-xs uppercase tracking-[0.25em] text-neutral-400 dark:text-neutral-500">
      Showing <span id="library-count">{totalCount}</span> entries
    </p>
  </div>

  <div class="space-y-3">
    <header class="flex items-center justify-between">
      <p class="text-xs font-semibold uppercase tracking-[0.35em] text-neutral-500 dark:text-neutral-400">Collections</p>
      <button type="button" class="js-filter-reset text-xs font-semibold uppercase tracking-[0.35em] text-neutral-400 transition hover:text-neutral-900 dark:hover:text-white">
        Reset
      </button>
    </header>
    <div class="flex flex-wrap gap-2">
      {collectionOptions.map((option) => (
        <button
          type="button"
          class="js-filter-button inline-flex items-center rounded-full border border-neutral-300 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-neutral-600 transition hover:border-neutral-900 hover:text-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-white dark:hover:text-white data-[active=true]:border-neutral-900 data-[active=true]:bg-neutral-900 data-[active=true]:text-white dark:data-[active=true]:border-white dark:data-[active=true]:bg-white dark:data-[active=true]:text-neutral-900"
          data-filter-group="collection"
          data-filter-value={option.value}
          data-default={option.value === 'all'}
          aria-pressed="false"
        >
          {option.label}
        </button>
      ))}
    </div>
  </div>

  {statusOptions.length > 0 && (
    <div class="space-y-3">
      <p class="text-xs font-semibold uppercase tracking-[0.35em] text-neutral-500 dark:text-neutral-400">Statuses</p>
      <div class="flex flex-wrap gap-2">
        {statusOptions.map((option) => (
          <button
            type="button"
            class="js-filter-button inline-flex items-center rounded-full border border-neutral-300 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-neutral-600 transition hover:border-neutral-900 hover:text-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-white dark:hover:text-white data-[active=true]:border-neutral-900 data-[active=true]:bg-neutral-900 data-[active=true]:text-white dark:data-[active=true]:border-white dark:data-[active=true]:bg-white dark:data-[active=true]:text-neutral-900"
            data-filter-group="status"
            data-filter-value={option.value}
            data-default={option.value === 'all'}
            aria-pressed="false"
          >
            {option.label}
          </button>
        ))}
      </div>
    </div>
  )}

  {categoryOptions.length > 0 && (
    <div class="space-y-3">
      <p class="text-xs font-semibold uppercase tracking-[0.35em] text-neutral-500 dark:text-neutral-400">Categories</p>
      <div class="flex flex-wrap gap-2">
        {categoryOptions.map((option) => (
          <button
            type="button"
            class="js-filter-button inline-flex items-center rounded-full border border-neutral-300 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-neutral-600 transition hover:border-neutral-900 hover:text-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-white dark:hover:text-white data-[active=true]:border-neutral-900 data-[active=true]:bg-neutral-900 data-[active=true]:text-white dark:data-[active=true]:border-white dark:data-[active=true]:bg-white dark:data-[active=true]:text-neutral-900"
            data-filter-group="category"
            data-filter-value={option.value}
            data-default={option.value === 'all'}
            aria-pressed="false"
          >
            {option.label}
          </button>
        ))}
      </div>
    </div>
  )}

  {tagOptions.length > 0 && (
    <div class="space-y-3">
      <p class="text-xs font-semibold uppercase tracking-[0.35em] text-neutral-500 dark:text-neutral-400">Tags & Tools</p>
      <div class="flex flex-wrap gap-2">
        {tagOptions.map((option) => (
          <button
            type="button"
            class="js-filter-button inline-flex items-center rounded-full border border-neutral-300 px-3 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-neutral-600 transition hover:border-neutral-900 hover:text-neutral-900 dark:border-neutral-700 dark:text-neutral-200 dark:hover:border-white dark:hover:text-white data-[active=true]:border-neutral-900 data-[active=true]:bg-neutral-900 data-[active=true]:text-white dark:data-[active=true]:border-white dark:data-[active=true]:bg-white dark:data-[active=true]:text-neutral-900"
            data-filter-group="tag"
            data-filter-value={option.value}
            data-default={option.value === 'all'}
            aria-pressed="false"
          >
            {option.label}
          </button>
        ))}
      </div>
    </div>
  )}
</aside>
